<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="csrf-token" content="{{ csrf_token }}" />
    {% load static %}

    <!-- HTML Meta Tags -->
    <title>Tidder</title>
    <meta name="description" content="Reddit Clone">

    <!-- Facebook Meta Tags -->
    <meta property="og:url" content="https://complete-tick-cleanly.ngrok-free.app">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Tidder">
    <meta property="og:description" content="Reddit Clone">
    <meta property="og:image"
        content="https://opengraph.b-cdn.net/production/images/25785e68-de73-4761-b85d-d851e46e7e07.png?token=Cxtyc7nIE5T6XMeyCxNeai8tR6vjyQq2kJJhaDTHLfk&height=240&width=240&expires=33267304195">

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="complete-tick-cleanly.ngrok-free.app">
    <meta property="twitter:url" content="https://complete-tick-cleanly.ngrok-free.app">
    <meta name="twitter:title" content="Tidder">
    <meta name="twitter:description" content="Reddit Clone">
    <meta name="twitter:image"
        content="https://opengraph.b-cdn.net/production/images/25785e68-de73-4761-b85d-d851e46e7e07.png?token=Cxtyc7nIE5T6XMeyCxNeai8tR6vjyQq2kJJhaDTHLfk&height=240&width=240&expires=33267304195">


    <script src="{% static 'js/tailwind.js'%}"></script>

    <!-- Flowbite -->
    <!-- <link rel="stylesheet" href="{% static 'css/flowbite.min.css'%}" /> -->
    <script src="{% static 'js/flowbite.min.js'%}"></script>

    <!-- Toast -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    

    <script src="{% static 'js/functions.js'%}"></script>

    {% block quill %} {% endblock %}

    <script>
        // On page load or when changing themes, best to add inline in `head` to avoid FOUC
        if (
            localStorage.getItem("color-theme") === "dark" ||
            (!("color-theme" in localStorage) &&
                window.matchMedia("(prefers-color-scheme: dark)").matches)
        ) {
            document.documentElement.classList.add("dark");
        } else {
            document.documentElement.classList.remove("dark");
        }
    </script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    // SLAPSOIL COLORS
                    colors: {
                        dark_1: "#0E1113",
                        dark_2: "#05090B",
                        dark_3: "#101214",
                        dark_4: "#333D42",
                        dark_5: "#161A1D",
                        dark_6: "#181C1F",
                        gray_1: "#3C4244",
                        gray_2: "#2B3336",
                        gray_3: "#ffffff33",
                        gray_4: "#A2A2A5",
                        white_1: "#F3F3F2",
                        white_2: "#717981",
                        white_3: "#889375",
                        white_4: "#F7F9F9",
                        button_red: "#C82C00",
                        button_red_hover: "#A61F00",
                        button_gray: "#E5EBEE",
                        button_gray_hover: "#DDE3E6",
                        button_blue: "#0A449B",
                        button_blue_hover: "#0A2F6C",
                        txt_color_1: "#131212",
                        txt_color_2: "#33363B",
                        txt_color_3: "#697075",
                        bg_1: "#F5F4F6",
                    },
                    keyframes: {
                        slideIn: {
                            '0%': { opacity: '0', transform: 'translateX(100%)' },
                            '100%': { opacity: '1', transform: 'translateX(0)' },
                        },
                    },
                    animation: {
                        slideIn: 'slideIn 0.3s ease-out forwards',
                    },
                },
            },
            darkMode: "class",
        };
    </script>
    {% block extra_head %}{% endblock %}
</head>

<body class="transition-colors dark:bg-dark_1 dark:text-white">
    {% include 'components/navbar.html'%}

    {% block content %} {% endblock %}


    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const createdAtElements =
                document.querySelectorAll("[data-created-at]");
            for (const createdAtElement of createdAtElements) {
                const createdAt = createdAtElement.getAttribute("data-created-at");
                createdAtElement.textContent = timeAgo(createdAt);
            }

            const postContents = document.querySelectorAll(".post-content");
            postContents.forEach((postContent) => {
                postContent.innerHTML = postContent.textContent;
                postContent.classList.add("line-clamp-50", "overflow-hidden", "text-ellipsis");
            });

            const postImages = document.querySelectorAll(".post-content img");
            postImages.forEach((postImage) => {
                postImage.classList.add("max-w-[300px]");
            });

            const eventDescriptions = document.querySelectorAll(".event-description");
            eventDescriptions.forEach((eventDescription) => {
                eventDescription.innerHTML = eventDescription.textContent;
            });

            const recentPosts = localStorage.getItem("recent_posts");
            if (recentPosts) {
                const recentPostsArray = JSON.parse(recentPosts);
                const recentPostsContainer = document.getElementById("recent_posts");
                recentPostsArray.reverse().forEach(post => {
                    addRecentPostItem(post);
                });
            }
        });
    </script>

</body>

</html>