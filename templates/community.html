{% extends 'base.html' %}
{% load role_lookup %}

{% block content %}
<div class="flex flex-row relative top-[10vh]">
    {% include 'components/leftbar.html' %}

    <div class="p-10 w-[85%] relative left-[15%]">
        {% if community %}
        <div
            class='w-full flex items-stretch justify-center h-[150px] rounded-lg border border-[#ffffff33] relative z-40'>
            <img src="{{ community.banner }}" alt="Community Banner" class='object-cover w-full h-full rounded-lg' />
            <!--TODO-->
            {% if user.is_authenticated and user.id == community.ownerid %}
            <button>
                <svg fill="currentColor" height="16" icon-name="edit-outline" viewBox="0 0 20 20" width="16"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="m18.236 3.158-1.4-1.4a2.615 2.615 0 0 0-3.667-.021L1.336 13.318a1.129 1.129 0 0 0-.336.8v3.757A1.122 1.122 0 0 0 2.121 19h3.757a1.131 1.131 0 0 0 .8-.337L18.256 6.826a2.616 2.616 0 0 0-.02-3.668ZM5.824 17.747H2.25v-3.574l9.644-9.435L15.259 8.1l-9.435 9.647ZM17.363 5.952l-1.23 1.257-3.345-3.345 1.257-1.23a1.362 1.362 0 0 1 1.91.01l1.4 1.4a1.364 1.364 0 0 1 .008 1.908Z">
                    </path>
                </svg>
            </button>
            {% endif %}
        </div>
        <div class='flex flex-row justify-between w-full relative bottom-6 items-end'>
            <div class='flex flex-row gap-2 items-end'>
                <div class="relative rounded-full w-[90px] h-[90px] border z-50">
                    {% if community.avatar %}
                    <img src="{{community.avatar}}" class=" w-full h-full rounded-full object-cover" />
                    {%else %}
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path
                            d="M10 0a10 10 0 1 0 10 10A10.011 10.011 0 0 0 10 0ZM8.016 8.633a1.616 1.616 0 0 0-.2.806V13.5H5.931V6.172h1.8v.9h.039a3.009 3.009 0 0 1 1.018-.732 3.45 3.45 0 0 1 1.449-.284c.246-.003.491.02.732.068.158.024.309.08.444.164l-.759 1.832a2.09 2.09 0 0 0-1.093-.26c-.33-.01-.658.062-.954.208a1.422 1.422 0 0 0-.591.565Zm2.9 6.918H9.355L14.7 2.633c.426.272.828.58 1.2.922l-4.984 11.996Z">
                        </path>
                    </svg>
                    {%endif%}
                </div>
                <p class='font-bold text-2xl'>r/{{community.name}}</p>
            </div>


            <div class='flex flex-row items-center gap-2'>
                <button class='flex flex-row gap-2 rounded-lg border border-white px-2 py-1 items-center'>
                    <svg rpl="" fill="currentColor" height="20" icon-name="add-outline" viewBox="0 0 20 20" width="16"
                        xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 9.375h-8.375V1h-1.25v8.375H1v1.25h8.375V19h1.25v-8.375H19v-1.25Z"></path>
                    </svg>
                    <p>Create a Post</p>
                </button>
                {% if community not in user_communities%}
                <button class='px-2 py-1 border border-black rounded-lg'>Join</button>
                {% endif %}


                {% if user_communities|get_community_role:community.id == 'admin' or 'moderator' %}
                <p>ADMIN OR MODERATOR</p>
                {%endif%}

            </div>

        </div>
        {% endif %}
    </div>
</div>

{% endblock %}